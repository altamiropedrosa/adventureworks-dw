version: 2

sources:
  - name: sap_adw
    description: Fonte do SAP do Adventure Works
    schema: sap_adw
    tables:

      - name: address
        description: Tabela de endereços
        tests:
          - dbt_expectations.expect_table_column_count_to_equal:
              value: 9
        columns:
          - name: addressid
            description: Chave primária (PK) da tabela de clientes
            data_type: int64
            tests:
              - dbt_expectations.expect_column_to_exist
              - unique
              - not_null
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64              
          
          - name: addressline1
            description: Campo 1 para descrição do endereço
          
          - name: addressline2
            description: Campo 2 para descrição do endereço
          
          - name: city
            description: Cidade do endereço
          
          - name: stateprovinceid
            description: Chave estrangeira (FK) da tabela de estados
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null
              - relationships:
                  field: stateprovinceid
                  to: ref('stateprovince')
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64              
          
          - name: spatiallocation
            description: Dados demográficos do endereço
          
          - name: rowguid
            description: Identificador único gerado para a tabela de endereços no sistema de origem
          
          - name: modifieddate
            description: Data de alteração do registro
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null
          
      - name: stateprovince
        description: Tabela de Estados
        tests:
          - dbt_expectations.expect_table_column_count_to_equal:
              value: 8
        columns:
          - name: stateprovinceid
            description: Chave primária (PK) da tabela de estados 
            tests:
              - dbt_expectations.expect_column_to_exist
              - unique
              - not_null
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64              
          
          - name: stateprovincecode
            description: Sigla do estado
          
          - name: countryregioncode
            description: Chave estrangeira (FK) da tabela de país
          
          - name: isonlystateprovinceflag
            description: Flag de marcação se o estado é um Pais
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: boolean              
          
          - name: name
            description: Nome do estado
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null
          
          - name: territoryid
            description: Dados demográficos do estado
            tests:
              - dbt_expectations.expect_column_to_exist
              - relationships:
                  field: territoryid
                  to: ref('salesterritory')
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64              
          
          - name: rowguid
            description: Identificador único gerado para a tabela de estados no sistema de origem
          
          - name: modifieddate
            description: Data de alteração do registro
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null

      - name: countryregion
        description: Tabela de País
        tests:
          - dbt_expectations.expect_table_column_count_to_equal:
              value: 3
        columns:
          - name: countryregioncode
            description: Chave primária (PK) da tabela de Pais 
            tests:
              - dbt_expectations.expect_column_to_exist
              - unique
              - not_null
          
          - name: name
            description: Nome do país
            tests:
              - dbt_expectations.expect_column_to_exist
              - unique
              - not_null
          
          - name: modifieddate
            description: Data de alteração do registro
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null

      - name: salesterritory
        description: Tabela de território de vendas
        tests:
          - dbt_expectations.expect_table_column_count_to_equal:
              value: 10
        columns:
          - name: territoryid
            description: Chave primária (PK) da tabela de territórios 
            tests:
              - dbt_expectations.expect_column_to_exist
              - unique
              - not_null
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64              
          
          - name: name
            description: Nome do território
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null
          
          - name: countryregioncode
            description: Chave estrangeira (FK) da tabela de país
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null
              - relationships:
                  field: countryregioncode
                  to: ref('countryregion')              
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: string              
          
          - name: group
            description: Grupo continental do território
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: string              
          
          - name: salesytd
            description: Somatório de vendas year to date (ytd)
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: float64 
          
          - name: saleslastyear
            description: Somatório de vendas do último ano
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: float64 
          
          - name: costytd
            description: Somatório de custo year to date (ytd)
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64        
          
          - name: costlastyear
            description: Somatório de custo do último ano
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64                         
          
          - name: modifieddate
            description: Data de alteração do registro
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: string        

      - name: product  # enabled
        description: Tabela de produtos
        tests:
          - dbt_expectations.expect_table_column_count_to_equal:
              value: 25
        columns:
          - name: productid
            description: Chave primária (PK) da tabela de produtos 
            tests:
              - dbt_expectations.expect_column_to_exist
              - unique
              - not_null
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64              
          
          - name: name
            description: Nome do produto
            tests:
              - not_null
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: string              
          
          - name: productnumber
            description: Número do produto
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: string              
          
          - name: makeflag
            description: Flag de marcação se o produto é de produção própria
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: boolean              
          
          - name: finishedgoodsflag
            description: Flag de marcação se o produto é um item vendável
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: boolean              

          - name: color
            description: Cor do produto
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: string              

          - name: safetystocklevel
            description: Quantidade mínima de estoque
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64              

          - name: reorderpoint
            description: Quantidade mínima para reabestecimento
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64              

          - name: standardcost
            description: Valor do custo de produção
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: float64              

          - name: listprice
            description: Valor de venda do produção
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: float64              

          - name: size
            description: Número do tamanho do produto
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: string              

          - name: sizeunitmeasurecode
            description: Unidade de medida para tamanho do produto. Chave estrangeira (FK) da tabela de unidades de medida
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null
              - relationships:
                  field: unitmeasurecode
                  to: ref('unitmeasure')
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: string              
          
          - name: weightunitmeasurecode
            description: Unidade de medida para peso do produto. Chave estrangeira (FK) da tabela de unidades de medida
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null
              - relationships:
                  field: unitmeasurecode
                  to: ref('unitmeasure')
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: string              

          - name: weight
            description: Número do peso do produto
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: float64   

          - name: daystomanufacture
            description: Quantidade de dias para fabricação do produto
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64              
          
          - name: productline
            description: Código da linha de produto
          
          - name: class
            description: Código de classificação do produto
          
          - name: style
            description: Código de estilo do produto

          - name: productsubcategoryid
            description: Subcategoria do produto. Chave estrangeira (FK) da tabela de subcategorias
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null
              - relationships:
                  field: productsubcategoryid
                  to: ref('productsubcategory')
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64              

          - name: productmodelid
            description: Modelo do produto. Chave estrangeira (FK) da tabela de modelos do produto
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null
              - relationships:
                  field: productmodelid
                  to: ref('productmodel')
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64              

          - name: sellstartdate
            description: Data de início de venda do produto

          - name: sellenddate
            description: Data de fim de venda do produto

          - name: discontinueddate
            description: Data que o produto foi descontinuado
            tests:
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64   

          - name: rowguid
            description: Identificador único gerado para a tabela de endereços no sistema de origem
          
          - name: modifieddate
            description: Data de alteração do registro
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null

      - name: productcategory  # enabled
        description: Tabela de categorias de produtos
        columns:
          - name: productcategoryid
            description: chave primária da tabela de categorias de produtos
            tests:
              - unique
              - not_null
      - name: productsubcategory
        description: Tabela de sub-categoria de produtos
      - name: productmodel
        description: Tabela de modelo de produtos
      - name: unitmeasure
        description: Tabela de unidade de medidas

      - name: person
        description: Tabela de pessoas
        tests:
          - dbt_expectations.expect_table_column_count_to_equal:
              value: 13
        columns: 
          - name: businessentityid
            description: Chave primária (PK) da tabela de pessoas
            tests:
              - unique
              - not_null
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64              
          
          - name: persontype
            description: "Tipo de pessoa primarária: SC = Lojista, IN = Cliente, SP = Vendedor, 
                          EM = Empregado, VC = Fornecedor, GC = Geral"
            tests:
              - not_null
              - accepted_values:
                  values: ['SC','IN','SP','EM','VC','GC']
                  quote: false
          
          - name: namestyle
            description: "Estilo do nome: 0 = Dados armazenados em estilo ocidental (nome, sobrenome) 
                                          1 = Dados armazenados em estilo oriental (sobrenome, nome)."
            tests:
              - not_null
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: boolean              

          - name: title
            description: Uma cortesia para o nome. Examplo Mr. ou Ms

          - name: firstname
            description: Primeiro nome da pessoa
            tests:
              - not_null

          - name: middlename
            description: Nome do meio da pessoa

          - name: lastname
            description: Último nome da pessoa

          - name: suffix
            description: Sufixo do nome. Example Sr. or Jr

          - name: emailpromotion
            description: "Tipo de contato por e-mail. 
                          0 = Não receber contatos promocionais por e-mail 
                          1 = Receber contatos promocinais somente pela AdventureWorks 
                          2 = Receber contatos promocinais pela AdventureWorks e parceiros"
            tests:
              - not_null
              - accepted_values:
                  values: [0, 1, 2]
                  quote: false

          - name: additionalcontactinfo
            description: Informações adicionais de contato sobre a pessoa armazenadas em formato xml

          - name: demographics
            description: Informações pessoais, como hobbies e receitas coletadas on-line. Usado para análise de vendas

          - name: rowguid
            description: Número ROWGUIDCOL que identifica exclusivamente o registro
            tests:
              - not_null

          - name: modifieddate
            description: Data e hora em que o registro foi atualizado pela última vez
            tests:
              - not_null
              

      - name: businessentity
        description: Tabela de entidade de negócio  
      - name: businessentitycontact
        description: Tabela de contatos de entidade de negócio
      - name: businessentityaddress
        description: Tabela de endereços de entidade de negócio
      - name: contacttype
        description: Tabela de tipos de contatos
      - name: addresstype
        description: Tabela de tipos de endereço
      - name: emailaddress
        description: Tabela de e-mails de pessoas
      - name: personphone
        description: Tabela de telefones de pessoas
      - name: phonenumbertype
        description: Tabela de tipo de telefones de pessoas
      - name: customer
        description: Tabela de clientes
        tests:
          - dbt_expectations.expect_table_column_count_to_equal:
              value: 6
        columns:
          - name: customerid
            description: Chave primária (PK) da tabela de clientes 
            tests:
              - dbt_expectations.expect_column_to_exist                  
              - unique
              - not_null
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64
          - name: personid
            description: Chave estrangeira (FK) da tabela de pessoas
            tests:
              - dbt_expectations.expect_column_to_exist                  
              - relationships:
                  field: businessentityid
                  to: ref('person')
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64
              
          - name: storeid
            description: Chave estrangeira (FK) da tabela de lojas
            tests:
              - dbt_expectations.expect_column_to_exist                  
              - relationships:
                  field: businessentityid
                  to: ref('store')
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64
          - name: territoryid
            description: Chave estrangeira (FK) da tabela de territórios
            tests:
              - dbt_expectations.expect_column_to_exist                  
              - not_null
              - relationships:
                  field: territoryid
                  to: ref('salesterritory')
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: int64
          - name: rowguid
            description: Identificador único gerado para a tabela de clientes no sistema de origem
            tests:
              - unique
              - not_null
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: string
          - name: modifieddate
            description: Data de alteração do registro
            tests:
              - dbt_expectations.expect_column_to_exist                  
              - not_null
              - dbt_expectations.expect_column_values_to_be_of_type:
                  column_type: string
      - name: store
        description: Tabela de lojas
      - name: salesperson
        description: Tabela de vendedores
      - name: creditcard
        description: Tabela de cartão de crédito
      - name: personcreditcard
        description: Tabela de cartão de crédito por pessoa
      - name: salesorderheader
        description: Tabela de pedido de vendas
      - name: salesorderdetail
        description: Tabela de itens de pedido de vendas
      - name: salesorderheadersalesreason
        description: Tabela de razão de vendas por Venda
      - name: salesreason
        description: Tabela de razão de vendas
      - name: salestaxrate
        description: Tabela de impostos de vendas
      - name: specialoffer
        description: Tabela de ofertas
      - name: specialofferproduct
        description: Tabela de ofertas por Produto
      - name: currency
        description: Tabela de moedas
      - name: currencyrate
        description: Tabela de taxa de câmbio
      - name: shipmethod  
        description: Tabela de método de envio

